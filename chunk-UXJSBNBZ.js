import{a as wn,b as vn,d as R,w as bn}from"./chunk-XJVIQCHY.js";var En={production:!0,firebaseConfig:{apiKey:"AIzaSyD-ydCF_2TCm--gKpdILm8MdPUs6P7KeWw",authDomain:"suspenceaudio-e9853.firebaseapp.com",projectId:"suspenceaudio-e9853",storageBucket:"suspenceaudio-e9853.firebasestorage.app",messagingSenderId:"443272629187",appId:"1:443272629187:web:8e30e8ae65aaf1a0cb4b76",measurementId:"G-F6L4GW013X"}};var Tn=()=>{};var Sn=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Hr=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],c=n[t++],m=n[t++],p=((i&7)<<18|(s&63)<<12|(c&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{let s=n[t++],c=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|c&63)}}return e.join("")},Vn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],c=i+1<n.length,m=c?n[i+1]:0,p=i+2<n.length,g=p?n[i+2]:0,y=s>>2,v=(s&3)<<4|m>>4,_=(m&15)<<2|g>>6,I=g&63;p||(I=64,c||(_=64)),r.push(t[y],t[v],t[_],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Sn(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Hr(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],m=i<n.length?t[n.charAt(i)]:0;++i;let g=i<n.length?t[n.charAt(i)]:64;++i;let v=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||m==null||g==null||v==null)throw new ot;let _=s<<2|m>>4;if(r.push(_),g!==64){let I=m<<4&240|g>>2;if(r.push(I),v!==64){let A=g<<6&192|v;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},ot=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Wr=function(n){let e=Sn(n);return Vn.encodeByteArray(e,!0)},me=function(n){return Wr(n).replace(/\./g,"")},Pn=function(n){try{return Vn.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Gr(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Kr=()=>Gr().__FIREBASE_DEFAULTS__,Qr=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Jr=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Pn(n[1]);return e&&JSON.parse(e)},Dn=()=>{try{return Tn()||Kr()||Qr()||Jr()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Yr=n=>{var e,t;return(t=(e=Dn())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Rn=n=>{let e=Yr(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},at=()=>{var n;return(n=Dn())===null||n===void 0?void 0:n.config};var xe=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Oe(n){return n.endsWith(".cloudworkstations.dev")}function Cn(n){return R(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function kn(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[me(JSON.stringify(t)),me(JSON.stringify(c)),""].join(".")}var pe={};function Xr(){let n={prod:[],emulator:[]};for(let e of Object.keys(pe))pe[e]?n.emulator.push(e):n.prod.push(e);return n}function Zr(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var An=!1;function ut(n,e){if(typeof window>"u"||typeof document>"u"||!Oe(window.location.host)||pe[n]===e||pe[n]||An)return;pe[n]=e;function t(_){return`__firebase__banner__${_}`}let r="__firebase__banner",s=Xr().prod.length>0;function c(){let _=document.getElementById(r);_&&_.remove()}function m(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function p(_,I){_.setAttribute("width","24"),_.setAttribute("id",I),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function g(){let _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{An=!0,c()},_}function y(_,I){_.setAttribute("id",I),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function v(){let _=Zr(r),I=t("text"),A=document.getElementById(I)||document.createElement("span"),V=t("learnmore"),P=document.getElementById(V)||document.createElement("a"),X=t("preprendIcon"),$=document.getElementById(X)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){let q=_.element;m(q),y(P,V);let re=g();p($,X),q.append($,A,P,re),document.body.appendChild(q)}s?(A.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function xn(){try{return typeof indexedDB=="object"}catch{return!1}}function On(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var ei="FirebaseError",j=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=ei,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ge.prototype.create)}},ge=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],c=s?ti(s,r):"Error",m=`${this.serviceName}: ${c} (${i}).`;return new j(i,m,r)}};function ti(n,e){return n.replace(ni,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var ni=/\{\$([^}]+)}/g;function se(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],c=e[i];if(In(s)&&In(c)){if(!se(s,c))return!1}else if(s!==c)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function In(n){return n!==null&&typeof n=="object"}var Xs=4*60*60*1e3;function _e(n){return n&&n._delegate?n._delegate:n}var U=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ee="[DEFAULT]";var ct=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new xe;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ii(e))try{this.getOrInitializeService({instanceIdentifier:ee})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ee){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return R(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ee){return this.instances.has(e)}getOptions(e=ee){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,c]of this.instancesDeferred.entries()){let m=this.normalizeInstanceIdentifier(s);r===m&&c.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let c=this.instances.get(i);return c&&e(c,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ri(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ee){return this.component?this.component.multipleInstances?e:ee:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function ri(n){return n===ee?void 0:n}function ii(n){return n.instantiationMode==="EAGER"}var Ne=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new ct(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var si=[],T=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(T||{}),oi={debug:T.DEBUG,verbose:T.VERBOSE,info:T.INFO,warn:T.WARN,error:T.ERROR,silent:T.SILENT},ai=T.INFO,ui={[T.DEBUG]:"log",[T.VERBOSE]:"log",[T.INFO]:"info",[T.WARN]:"warn",[T.ERROR]:"error"},ci=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=ui[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},oe=class{constructor(e){this.name=e,this._logLevel=ai,this._logHandler=ci,this._userLogHandler=null,si.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in T))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oi[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,T.DEBUG,...e),this._logHandler(this,T.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,T.VERBOSE,...e),this._logHandler(this,T.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,T.INFO,...e),this._logHandler(this,T.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,T.WARN,...e),this._logHandler(this,T.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,T.ERROR,...e),this._logHandler(this,T.ERROR,...e)}};var li=(n,e)=>e.some(t=>n instanceof t),Nn,Fn;function hi(){return Nn||(Nn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function di(){return Fn||(Fn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Mn=new WeakMap,ht=new WeakMap,Ln=new WeakMap,lt=new WeakMap,ft=new WeakMap;function fi(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",c)},s=()=>{t(L(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Mn.set(t,n)}).catch(()=>{}),ft.set(e,n),e}function pi(n){if(ht.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",c),n.removeEventListener("abort",c)},s=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",c),n.addEventListener("abort",c)});ht.set(n,e)}var dt={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ht.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Ln.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return L(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Bn(n){dt=n(dt)}function mi(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Fe(this),e,...t);return Ln.set(r,e.sort?e.sort():[e]),L(r)}:di().includes(n)?function(...e){return n.apply(Fe(this),e),L(Mn.get(this))}:function(...e){return L(n.apply(Fe(this),e))}}function gi(n){return typeof n=="function"?mi(n):(n instanceof IDBTransaction&&pi(n),li(n,hi())?new Proxy(n,dt):n)}function L(n){if(n instanceof IDBRequest)return fi(n);if(lt.has(n))return lt.get(n);let e=gi(n);return e!==n&&(lt.set(n,e),ft.set(e,n)),e}var Fe=n=>ft.get(n);function qn(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let c=indexedDB.open(n,e),m=L(c);return r&&c.addEventListener("upgradeneeded",p=>{r(L(c.result),p.oldVersion,p.newVersion,L(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),m.then(p=>{s&&p.addEventListener("close",()=>s()),i&&p.addEventListener("versionchange",g=>i(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}var _i=["get","getKey","getAll","getAllKeys","count"],yi=["put","add","delete","clear"],pt=new Map;function $n(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(pt.get(e))return pt.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=yi.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||_i.includes(t)))return;let s=function(c,...m){return R(this,null,function*(){let p=this.transaction(c,i?"readwrite":"readonly"),g=p.store;return r&&(g=g.index(m.shift())),(yield Promise.all([g[t](...m),i&&p.done]))[0]})};return pt.set(e,s),s}Bn(n=>vn(wn({},n),{get:(e,t,r)=>$n(e,t)||n.get(e,t,r),has:(e,t)=>!!$n(e,t)||n.has(e,t)}));var gt=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(wi(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function wi(n){let e=n.getComponent();return e?.type==="VERSION"}var _t="@firebase/app",jn="0.12.3";var z=new oe("@firebase/app"),vi="@firebase/app-compat",bi="@firebase/analytics-compat",Ei="@firebase/analytics",Ti="@firebase/app-check-compat",Ai="@firebase/app-check",Ii="@firebase/auth",Si="@firebase/auth-compat",Vi="@firebase/database",Pi="@firebase/data-connect",Di="@firebase/database-compat",Ri="@firebase/functions",Ci="@firebase/functions-compat",ki="@firebase/installations",xi="@firebase/installations-compat",Oi="@firebase/messaging",Ni="@firebase/messaging-compat",Fi="@firebase/performance",Mi="@firebase/performance-compat",Li="@firebase/remote-config",Bi="@firebase/remote-config-compat",$i="@firebase/storage",qi="@firebase/storage-compat",ji="@firebase/firestore",Ui="@firebase/vertexai",zi="@firebase/firestore-compat",Hi="firebase",Wi="11.7.3";var yt="[DEFAULT]",Gi={[_t]:"fire-core",[vi]:"fire-core-compat",[Ei]:"fire-analytics",[bi]:"fire-analytics-compat",[Ai]:"fire-app-check",[Ti]:"fire-app-check-compat",[Ii]:"fire-auth",[Si]:"fire-auth-compat",[Vi]:"fire-rtdb",[Pi]:"fire-data-connect",[Di]:"fire-rtdb-compat",[Ri]:"fire-fn",[Ci]:"fire-fn-compat",[ki]:"fire-iid",[xi]:"fire-iid-compat",[Oi]:"fire-fcm",[Ni]:"fire-fcm-compat",[Fi]:"fire-perf",[Mi]:"fire-perf-compat",[Li]:"fire-rc",[Bi]:"fire-rc-compat",[$i]:"fire-gcs",[qi]:"fire-gcs-compat",[ji]:"fire-fst",[zi]:"fire-fst-compat",[Ui]:"fire-vertex","fire-js":"fire-js",[Hi]:"fire-js-all"};var Me=new Map,Ki=new Map,wt=new Map;function Un(n,e){try{n.container.addComponent(e)}catch(t){z.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ye(n){let e=n.name;if(wt.has(e))return z.debug(`There were multiple attempts to register component ${e}.`),!1;wt.set(e,n);for(let t of Me.values())Un(t,n);for(let t of Ki.values())Un(t,n);return!0}function Gn(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Kn(n){return n==null?!1:n.settings!==void 0}var Qi={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},W=new ge("app","Firebase",Qi);var vt=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new U("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw W.create("app-deleted",{appName:this._name})}};var Qn=Wi;function Tt(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:yt,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw W.create("bad-app-name",{appName:String(i)});if(t||(t=at()),!t)throw W.create("no-options");let s=Me.get(i);if(s){if(se(t,s.options)&&se(r,s.config))return s;throw W.create("duplicate-app",{appName:i})}let c=new Ne(i);for(let p of wt.values())c.addComponent(p);let m=new vt(t,r,c);return Me.set(i,m),m}function Jn(n=yt){let e=Me.get(n);if(!e&&n===yt&&at())return Tt();if(!e)throw W.create("no-app",{appName:n});return e}function G(n,e,t){var r;let i=(r=Gi[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),c=e.match(/\s|\//);if(s||c){let m=[`Unable to register library "${i}" with version "${e}":`];s&&m.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&c&&m.push("and"),c&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),z.warn(m.join(" "));return}ye(new U(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Ji="firebase-heartbeat-database",Yi=1,we="firebase-heartbeat-store",mt=null;function Yn(){return mt||(mt=qn(Ji,Yi,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(we)}catch(t){console.warn(t)}}}}).catch(n=>{throw W.create("idb-open",{originalErrorMessage:n.message})})),mt}function Xi(n){return R(this,null,function*(){try{let t=(yield Yn()).transaction(we),r=yield t.objectStore(we).get(Xn(n));return yield t.done,r}catch(e){if(e instanceof j)z.warn(e.message);else{let t=W.create("idb-get",{originalErrorMessage:e?.message});z.warn(t.message)}}})}function zn(n,e){return R(this,null,function*(){try{let r=(yield Yn()).transaction(we,"readwrite");yield r.objectStore(we).put(e,Xn(n)),yield r.done}catch(t){if(t instanceof j)z.warn(t.message);else{let r=W.create("idb-set",{originalErrorMessage:t?.message});z.warn(r.message)}}})}function Xn(n){return`${n.name}!${n.options.appId}`}var Zi=1024,es=30,bt=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Et(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return R(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Hn();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(c=>c.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>es){let c=ns(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){z.warn(r)}})}getHeartbeatsHeader(){return R(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Hn(),{heartbeatsToSend:r,unsentEntries:i}=ts(this._heartbeatsCache.heartbeats),s=me(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return z.warn(t),""}})}};function Hn(){return new Date().toISOString().substring(0,10)}function ts(n,e=Zi){let t=[],r=n.slice();for(let i of n){let s=t.find(c=>c.agent===i.agent);if(s){if(s.dates.push(i.date),Wn(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Wn(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Et=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return R(this,null,function*(){return xn()?On().then(()=>!0).catch(()=>!1):!1})}read(){return R(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield Xi(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return R(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return zn(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return R(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return zn(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Wn(n){return me(JSON.stringify({version:2,heartbeats:n})).length}function ns(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function rs(n){ye(new U("platform-logger",e=>new gt(e),"PRIVATE")),ye(new U("heartbeat",e=>new bt(e),"PRIVATE")),G(_t,jn,n),G(_t,jn,"esm2017"),G("fire-js","")}rs("");var Zn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},er={};var At,is;(function(){var n;function e(d,o){function u(){}u.prototype=o.prototype,d.D=o.prototype,d.prototype=new u,d.prototype.constructor=d,d.C=function(l,h,f){for(var a=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)a[Z-2]=arguments[Z];return o.prototype[h].apply(l,a)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(d,o,u){u||(u=0);var l=Array(16);if(typeof o=="string")for(var h=0;16>h;++h)l[h]=o.charCodeAt(u++)|o.charCodeAt(u++)<<8|o.charCodeAt(u++)<<16|o.charCodeAt(u++)<<24;else for(h=0;16>h;++h)l[h]=o[u++]|o[u++]<<8|o[u++]<<16|o[u++]<<24;o=d.g[0],u=d.g[1],h=d.g[2];var f=d.g[3],a=o+(f^u&(h^f))+l[0]+3614090360&4294967295;o=u+(a<<7&4294967295|a>>>25),a=f+(h^o&(u^h))+l[1]+3905402710&4294967295,f=o+(a<<12&4294967295|a>>>20),a=h+(u^f&(o^u))+l[2]+606105819&4294967295,h=f+(a<<17&4294967295|a>>>15),a=u+(o^h&(f^o))+l[3]+3250441966&4294967295,u=h+(a<<22&4294967295|a>>>10),a=o+(f^u&(h^f))+l[4]+4118548399&4294967295,o=u+(a<<7&4294967295|a>>>25),a=f+(h^o&(u^h))+l[5]+1200080426&4294967295,f=o+(a<<12&4294967295|a>>>20),a=h+(u^f&(o^u))+l[6]+2821735955&4294967295,h=f+(a<<17&4294967295|a>>>15),a=u+(o^h&(f^o))+l[7]+4249261313&4294967295,u=h+(a<<22&4294967295|a>>>10),a=o+(f^u&(h^f))+l[8]+1770035416&4294967295,o=u+(a<<7&4294967295|a>>>25),a=f+(h^o&(u^h))+l[9]+2336552879&4294967295,f=o+(a<<12&4294967295|a>>>20),a=h+(u^f&(o^u))+l[10]+4294925233&4294967295,h=f+(a<<17&4294967295|a>>>15),a=u+(o^h&(f^o))+l[11]+2304563134&4294967295,u=h+(a<<22&4294967295|a>>>10),a=o+(f^u&(h^f))+l[12]+1804603682&4294967295,o=u+(a<<7&4294967295|a>>>25),a=f+(h^o&(u^h))+l[13]+4254626195&4294967295,f=o+(a<<12&4294967295|a>>>20),a=h+(u^f&(o^u))+l[14]+2792965006&4294967295,h=f+(a<<17&4294967295|a>>>15),a=u+(o^h&(f^o))+l[15]+1236535329&4294967295,u=h+(a<<22&4294967295|a>>>10),a=o+(h^f&(u^h))+l[1]+4129170786&4294967295,o=u+(a<<5&4294967295|a>>>27),a=f+(u^h&(o^u))+l[6]+3225465664&4294967295,f=o+(a<<9&4294967295|a>>>23),a=h+(o^u&(f^o))+l[11]+643717713&4294967295,h=f+(a<<14&4294967295|a>>>18),a=u+(f^o&(h^f))+l[0]+3921069994&4294967295,u=h+(a<<20&4294967295|a>>>12),a=o+(h^f&(u^h))+l[5]+3593408605&4294967295,o=u+(a<<5&4294967295|a>>>27),a=f+(u^h&(o^u))+l[10]+38016083&4294967295,f=o+(a<<9&4294967295|a>>>23),a=h+(o^u&(f^o))+l[15]+3634488961&4294967295,h=f+(a<<14&4294967295|a>>>18),a=u+(f^o&(h^f))+l[4]+3889429448&4294967295,u=h+(a<<20&4294967295|a>>>12),a=o+(h^f&(u^h))+l[9]+568446438&4294967295,o=u+(a<<5&4294967295|a>>>27),a=f+(u^h&(o^u))+l[14]+3275163606&4294967295,f=o+(a<<9&4294967295|a>>>23),a=h+(o^u&(f^o))+l[3]+4107603335&4294967295,h=f+(a<<14&4294967295|a>>>18),a=u+(f^o&(h^f))+l[8]+1163531501&4294967295,u=h+(a<<20&4294967295|a>>>12),a=o+(h^f&(u^h))+l[13]+2850285829&4294967295,o=u+(a<<5&4294967295|a>>>27),a=f+(u^h&(o^u))+l[2]+4243563512&4294967295,f=o+(a<<9&4294967295|a>>>23),a=h+(o^u&(f^o))+l[7]+1735328473&4294967295,h=f+(a<<14&4294967295|a>>>18),a=u+(f^o&(h^f))+l[12]+2368359562&4294967295,u=h+(a<<20&4294967295|a>>>12),a=o+(u^h^f)+l[5]+4294588738&4294967295,o=u+(a<<4&4294967295|a>>>28),a=f+(o^u^h)+l[8]+2272392833&4294967295,f=o+(a<<11&4294967295|a>>>21),a=h+(f^o^u)+l[11]+1839030562&4294967295,h=f+(a<<16&4294967295|a>>>16),a=u+(h^f^o)+l[14]+4259657740&4294967295,u=h+(a<<23&4294967295|a>>>9),a=o+(u^h^f)+l[1]+2763975236&4294967295,o=u+(a<<4&4294967295|a>>>28),a=f+(o^u^h)+l[4]+1272893353&4294967295,f=o+(a<<11&4294967295|a>>>21),a=h+(f^o^u)+l[7]+4139469664&4294967295,h=f+(a<<16&4294967295|a>>>16),a=u+(h^f^o)+l[10]+3200236656&4294967295,u=h+(a<<23&4294967295|a>>>9),a=o+(u^h^f)+l[13]+681279174&4294967295,o=u+(a<<4&4294967295|a>>>28),a=f+(o^u^h)+l[0]+3936430074&4294967295,f=o+(a<<11&4294967295|a>>>21),a=h+(f^o^u)+l[3]+3572445317&4294967295,h=f+(a<<16&4294967295|a>>>16),a=u+(h^f^o)+l[6]+76029189&4294967295,u=h+(a<<23&4294967295|a>>>9),a=o+(u^h^f)+l[9]+3654602809&4294967295,o=u+(a<<4&4294967295|a>>>28),a=f+(o^u^h)+l[12]+3873151461&4294967295,f=o+(a<<11&4294967295|a>>>21),a=h+(f^o^u)+l[15]+530742520&4294967295,h=f+(a<<16&4294967295|a>>>16),a=u+(h^f^o)+l[2]+3299628645&4294967295,u=h+(a<<23&4294967295|a>>>9),a=o+(h^(u|~f))+l[0]+4096336452&4294967295,o=u+(a<<6&4294967295|a>>>26),a=f+(u^(o|~h))+l[7]+1126891415&4294967295,f=o+(a<<10&4294967295|a>>>22),a=h+(o^(f|~u))+l[14]+2878612391&4294967295,h=f+(a<<15&4294967295|a>>>17),a=u+(f^(h|~o))+l[5]+4237533241&4294967295,u=h+(a<<21&4294967295|a>>>11),a=o+(h^(u|~f))+l[12]+1700485571&4294967295,o=u+(a<<6&4294967295|a>>>26),a=f+(u^(o|~h))+l[3]+2399980690&4294967295,f=o+(a<<10&4294967295|a>>>22),a=h+(o^(f|~u))+l[10]+4293915773&4294967295,h=f+(a<<15&4294967295|a>>>17),a=u+(f^(h|~o))+l[1]+2240044497&4294967295,u=h+(a<<21&4294967295|a>>>11),a=o+(h^(u|~f))+l[8]+1873313359&4294967295,o=u+(a<<6&4294967295|a>>>26),a=f+(u^(o|~h))+l[15]+4264355552&4294967295,f=o+(a<<10&4294967295|a>>>22),a=h+(o^(f|~u))+l[6]+2734768916&4294967295,h=f+(a<<15&4294967295|a>>>17),a=u+(f^(h|~o))+l[13]+1309151649&4294967295,u=h+(a<<21&4294967295|a>>>11),a=o+(h^(u|~f))+l[4]+4149444226&4294967295,o=u+(a<<6&4294967295|a>>>26),a=f+(u^(o|~h))+l[11]+3174756917&4294967295,f=o+(a<<10&4294967295|a>>>22),a=h+(o^(f|~u))+l[2]+718787259&4294967295,h=f+(a<<15&4294967295|a>>>17),a=u+(f^(h|~o))+l[9]+3951481745&4294967295,d.g[0]=d.g[0]+o&4294967295,d.g[1]=d.g[1]+(h+(a<<21&4294967295|a>>>11))&4294967295,d.g[2]=d.g[2]+h&4294967295,d.g[3]=d.g[3]+f&4294967295}r.prototype.u=function(d,o){o===void 0&&(o=d.length);for(var u=o-this.blockSize,l=this.B,h=this.h,f=0;f<o;){if(h==0)for(;f<=u;)i(this,d,f),f+=this.blockSize;if(typeof d=="string"){for(;f<o;)if(l[h++]=d.charCodeAt(f++),h==this.blockSize){i(this,l),h=0;break}}else for(;f<o;)if(l[h++]=d[f++],h==this.blockSize){i(this,l),h=0;break}}this.h=h,this.o+=o},r.prototype.v=function(){var d=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);d[0]=128;for(var o=1;o<d.length-8;++o)d[o]=0;var u=8*this.o;for(o=d.length-8;o<d.length;++o)d[o]=u&255,u/=256;for(this.u(d),d=Array(16),o=u=0;4>o;++o)for(var l=0;32>l;l+=8)d[u++]=this.g[o]>>>l&255;return d};function s(d,o){var u=m;return Object.prototype.hasOwnProperty.call(u,d)?u[d]:u[d]=o(d)}function c(d,o){this.h=o;for(var u=[],l=!0,h=d.length-1;0<=h;h--){var f=d[h]|0;l&&f==o||(u[h]=f,l=!1)}this.g=u}var m={};function p(d){return-128<=d&&128>d?s(d,function(o){return new c([o|0],0>o?-1:0)}):new c([d|0],0>d?-1:0)}function g(d){if(isNaN(d)||!isFinite(d))return v;if(0>d)return P(g(-d));for(var o=[],u=1,l=0;d>=u;l++)o[l]=d/u|0,u*=4294967296;return new c(o,0)}function y(d,o){if(d.length==0)throw Error("number format error: empty string");if(o=o||10,2>o||36<o)throw Error("radix out of range: "+o);if(d.charAt(0)=="-")return P(y(d.substring(1),o));if(0<=d.indexOf("-"))throw Error('number format error: interior "-" character');for(var u=g(Math.pow(o,8)),l=v,h=0;h<d.length;h+=8){var f=Math.min(8,d.length-h),a=parseInt(d.substring(h,h+f),o);8>f?(f=g(Math.pow(o,f)),l=l.j(f).add(g(a))):(l=l.j(u),l=l.add(g(a)))}return l}var v=p(0),_=p(1),I=p(16777216);n=c.prototype,n.m=function(){if(V(this))return-P(this).m();for(var d=0,o=1,u=0;u<this.g.length;u++){var l=this.i(u);d+=(0<=l?l:4294967296+l)*o,o*=4294967296}return d},n.toString=function(d){if(d=d||10,2>d||36<d)throw Error("radix out of range: "+d);if(A(this))return"0";if(V(this))return"-"+P(this).toString(d);for(var o=g(Math.pow(d,6)),u=this,l="";;){var h=re(u,o).g;u=X(u,h.j(o));var f=((0<u.g.length?u.g[0]:u.h)>>>0).toString(d);if(u=h,A(u))return f+l;for(;6>f.length;)f="0"+f;l=f+l}},n.i=function(d){return 0>d?0:d<this.g.length?this.g[d]:this.h};function A(d){if(d.h!=0)return!1;for(var o=0;o<d.g.length;o++)if(d.g[o]!=0)return!1;return!0}function V(d){return d.h==-1}n.l=function(d){return d=X(this,d),V(d)?-1:A(d)?0:1};function P(d){for(var o=d.g.length,u=[],l=0;l<o;l++)u[l]=~d.g[l];return new c(u,~d.h).add(_)}n.abs=function(){return V(this)?P(this):this},n.add=function(d){for(var o=Math.max(this.g.length,d.g.length),u=[],l=0,h=0;h<=o;h++){var f=l+(this.i(h)&65535)+(d.i(h)&65535),a=(f>>>16)+(this.i(h)>>>16)+(d.i(h)>>>16);l=a>>>16,f&=65535,a&=65535,u[h]=a<<16|f}return new c(u,u[u.length-1]&-2147483648?-1:0)};function X(d,o){return d.add(P(o))}n.j=function(d){if(A(this)||A(d))return v;if(V(this))return V(d)?P(this).j(P(d)):P(P(this).j(d));if(V(d))return P(this.j(P(d)));if(0>this.l(I)&&0>d.l(I))return g(this.m()*d.m());for(var o=this.g.length+d.g.length,u=[],l=0;l<2*o;l++)u[l]=0;for(l=0;l<this.g.length;l++)for(var h=0;h<d.g.length;h++){var f=this.i(l)>>>16,a=this.i(l)&65535,Z=d.i(h)>>>16,yn=d.i(h)&65535;u[2*l+2*h]+=a*yn,$(u,2*l+2*h),u[2*l+2*h+1]+=f*yn,$(u,2*l+2*h+1),u[2*l+2*h+1]+=a*Z,$(u,2*l+2*h+1),u[2*l+2*h+2]+=f*Z,$(u,2*l+2*h+2)}for(l=0;l<o;l++)u[l]=u[2*l+1]<<16|u[2*l];for(l=o;l<2*o;l++)u[l]=0;return new c(u,0)};function $(d,o){for(;(d[o]&65535)!=d[o];)d[o+1]+=d[o]>>>16,d[o]&=65535,o++}function q(d,o){this.g=d,this.h=o}function re(d,o){if(A(o))throw Error("division by zero");if(A(d))return new q(v,v);if(V(d))return o=re(P(d),o),new q(P(o.g),P(o.h));if(V(o))return o=re(d,P(o)),new q(P(o.g),o.h);if(30<d.g.length){if(V(d)||V(o))throw Error("slowDivide_ only works with positive integers.");for(var u=_,l=o;0>=l.l(d);)u=_n(u),l=_n(l);var h=ie(u,1),f=ie(l,1);for(l=ie(l,2),u=ie(u,2);!A(l);){var a=f.add(l);0>=a.l(d)&&(h=h.add(u),f=a),l=ie(l,1),u=ie(u,1)}return o=X(d,h.j(o)),new q(h,o)}for(h=v;0<=d.l(o);){for(u=Math.max(1,Math.floor(d.m()/o.m())),l=Math.ceil(Math.log(u)/Math.LN2),l=48>=l?1:Math.pow(2,l-48),f=g(u),a=f.j(o);V(a)||0<a.l(d);)u-=l,f=g(u),a=f.j(o);A(f)&&(f=_),h=h.add(f),d=X(d,a)}return new q(h,d)}n.A=function(d){return re(this,d).h},n.and=function(d){for(var o=Math.max(this.g.length,d.g.length),u=[],l=0;l<o;l++)u[l]=this.i(l)&d.i(l);return new c(u,this.h&d.h)},n.or=function(d){for(var o=Math.max(this.g.length,d.g.length),u=[],l=0;l<o;l++)u[l]=this.i(l)|d.i(l);return new c(u,this.h|d.h)},n.xor=function(d){for(var o=Math.max(this.g.length,d.g.length),u=[],l=0;l<o;l++)u[l]=this.i(l)^d.i(l);return new c(u,this.h^d.h)};function _n(d){for(var o=d.g.length+1,u=[],l=0;l<o;l++)u[l]=d.i(l)<<1|d.i(l-1)>>>31;return new c(u,d.h)}function ie(d,o){var u=o>>5;o%=32;for(var l=d.g.length-u,h=[],f=0;f<l;f++)h[f]=0<o?d.i(f+u)>>>o|d.i(f+u+1)<<32-o:d.i(f+u);return new c(h,d.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,is=er.Md5=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=y,At=er.Integer=c}).apply(typeof Zn<"u"?Zn:typeof self<"u"?self:typeof window<"u"?window:{});var tr="4.7.14";var k=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};k.UNAUTHENTICATED=new k(null),k.GOOGLE_CREDENTIALS=new k("google-credentials-uid"),k.FIRST_PARTY=new k("first-party-uid"),k.MOCK_USER=new k("mock-user");var fe="11.7.3";var le=new oe("@firebase/firestore");function $e(n,...e){if(le.logLevel<=T.DEBUG){let t=e.map(fn);le.debug(`Firestore (${fe}): ${n}`,...t)}}function dn(n,...e){if(le.logLevel<=T.ERROR){let t=e.map(fn);le.error(`Firestore (${fe}): ${n}`,...t)}}function Er(n,...e){if(le.logLevel<=T.WARN){let t=e.map(fn);le.warn(`Firestore (${fe}): ${n}`,...t)}}function fn(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function C(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Tr(n,r,t)}function Tr(n,e,t){let r=`FIRESTORE (${fe}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw dn(r),new Error(r)}function J(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Tr(e,i,r)}function pn(n,e){return n}var nr="ok",ss="cancelled",ve="unknown",b="invalid-argument",os="deadline-exceeded",as="not-found";var us="permission-denied",Vt="unauthenticated",cs="resource-exhausted",he="failed-precondition",ls="aborted",hs="out-of-range",Ar="unimplemented",ds="internal",fs="unavailable";var w=class extends j{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var qe=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Pt=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(k.UNAUTHENTICATED))}shutdown(){}},Dt=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Rt=class{constructor(e){this.auth=null,e.onInit(t=>{this.auth=t})}getToken(){return this.auth?this.auth.getToken().then(e=>e?(J(typeof e.accessToken=="string",42297,{t:e}),new qe(e.accessToken,new k(this.auth.getUid()))):null):Promise.resolve(null)}invalidateToken(){}start(e,t){}shutdown(){}},Ct=class{constructor(e,t,r){this.i=e,this.o=t,this.u=r,this.type="FirstParty",this.user=k.FIRST_PARTY,this.l=new Map}h(){return this.u?this.u():null}get headers(){this.l.set("X-Goog-AuthUser",this.i);let e=this.h();return e&&this.l.set("Authorization",e),this.o&&this.l.set("X-Goog-Iam-Authorization-Token",this.o),this.l}},kt=class{constructor(e,t,r){this.i=e,this.o=t,this.u=r}getToken(){return Promise.resolve(new Ct(this.i,this.o,this.u))}start(e,t){e.enqueueRetryable(()=>t(k.FIRST_PARTY))}shutdown(){}invalidateToken(){}},je=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},xt=class{constructor(e,t){this.m=t,this.appCheck=null,this.T=null,Kn(e)&&e.settings.appCheckToken&&(this.T=e.settings.appCheckToken),t.onInit(r=>{this.appCheck=r})}getToken(){return this.T?Promise.resolve(new je(this.T)):this.appCheck?this.appCheck.getToken().then(e=>e?(J(typeof e.token=="string",3470,{tokenResult:e}),new je(e.token)):null):Promise.resolve(null)}invalidateToken(){}start(e,t){}shutdown(){}};var Ot=class{constructor(e,t,r,i,s,c,m,p,g,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=y}},Nt="(default)",Ue=class n{constructor(e,t){this.projectId=e,this.database=t||Nt}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Nt}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};function S(n,e){return n<e?-1:n>e?1:0}function Ft(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return S(r,i);{let s=new TextEncoder,c=ps(s.encode(rr(n,t)),s.encode(rr(e,t)));return c!==0?c:S(r,i)}}t+=r>65535?2:1}return S(n.length,e.length)}function rr(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function ps(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return S(n[t],e[t]);return S(n.length,e.length)}function ms(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var ir="__name__",ze=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&C(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&C(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return S(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Ft(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return At.fromString(e.substring(4,e.length-2))}},O=class n extends ze{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new w(b,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},gs=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Q=class n extends ze{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return gs.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ir}static keyField(){return new n([ir])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new w(b,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},c=!1;for(;i<e.length;){let m=e[i];if(m==="\\"){if(i+1===e.length)throw new w(b,"Path has trailing escape character: "+e);let p=e[i+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new w(b,"Path has invalid escape sequence: "+e);r+=p,i+=2}else m==="`"?(c=!c,i++):m!=="."||c?(r+=m,i++):(s(),i++)}if(s(),c)throw new w(b,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var F=class n{constructor(e){this.path=e}static fromPath(e){return new n(O.fromString(e))}static fromName(e){return new n(O.fromString(e).popFirst(5))}static empty(){return new n(O.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&O.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return O.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new O(e.slice()))}};function _s(n,e,t){if(!t)throw new w(b,`Function ${n}() cannot be called with an empty ${e}.`)}function sr(n){if(F.isDocumentKey(n))throw new w(b,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function it(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":C(12329,{type:typeof n})}function Ir(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new w(b,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=it(n);throw new w(b,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Sr(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Le=null;function ys(){return Le===null?Le=function(){return 268435456+Math.round(2147483648*Math.random())}():Le++,"0x"+Le.toString(16)}function ws(n){return n==null}function He(n){return n===0&&1/n==-1/0}var It="RestConnection",vs={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Mt=class{get A(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.P=t+"://"+e.host,this.R=`projects/${r}/databases/${i}`,this.I=this.databaseId.database===Nt?`project_id=${r}`:`project_id=${r}&database_id=${i}`}V(e,t,r,i,s){let c=ys(),m=this.p(e,t.toUriEncodedString());$e(It,`Sending RPC '${e}' ${c}:`,m,r);let p={"google-cloud-resource-prefix":this.R,"x-goog-request-params":this.I};this.F(p,i,s);let{host:g}=new URL(m),y=Oe(g);return this.v(e,m,p,r,y).then(v=>($e(It,`Received RPC '${e}' ${c}: `,v),v),v=>{throw Er(It,`RPC '${e}' ${c} failed with error: `,v,"url: ",m,"request:",r),v})}D(e,t,r,i,s,c){return this.V(e,t,r,i,s)}F(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fe}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}p(e,t){let r=vs[e];return`${this.P}/v1/${t}:${r}`}terminate(){}};var or,E;function ar(n){if(n===void 0)return dn("RPC_ERROR","HTTP error has no status"),ve;switch(n){case 200:return nr;case 400:return he;case 401:return Vt;case 403:return us;case 404:return as;case 409:return ls;case 416:return hs;case 429:return cs;case 499:return ss;case 500:return ve;case 501:return Ar;case 503:return fs;case 504:return os;default:return n>=200&&n<300?nr:n>=400&&n<500?he:n>=500&&n<600?ds:ve}}(E=or||(or={}))[E.OK=0]="OK",E[E.CANCELLED=1]="CANCELLED",E[E.UNKNOWN=2]="UNKNOWN",E[E.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",E[E.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",E[E.NOT_FOUND=5]="NOT_FOUND",E[E.ALREADY_EXISTS=6]="ALREADY_EXISTS",E[E.PERMISSION_DENIED=7]="PERMISSION_DENIED",E[E.UNAUTHENTICATED=16]="UNAUTHENTICATED",E[E.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",E[E.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",E[E.ABORTED=10]="ABORTED",E[E.OUT_OF_RANGE=11]="OUT_OF_RANGE",E[E.UNIMPLEMENTED=12]="UNIMPLEMENTED",E[E.INTERNAL=13]="INTERNAL",E[E.UNAVAILABLE=14]="UNAVAILABLE",E[E.DATA_LOSS=15]="DATA_LOSS";var Lt=class extends Mt{C(e,t){throw new Error("Not supported by FetchConnection")}v(e,t,r,i,s){return R(this,null,function*(){var c;let m=JSON.stringify(i),p;try{let g={method:"POST",headers:r,body:m};s&&(g.credentials="include"),p=yield fetch(t,g)}catch(g){let y=g;throw new w(ar(y.status),"Request failed with error: "+y.statusText)}if(!p.ok){let g=yield p.json();Array.isArray(g)&&(g=g[0]);let y=(c=g?.error)===null||c===void 0?void 0:c.message;throw new w(ar(p.status),`Request failed with error: ${y??p.statusText}`)}return p.json()})}};function ur(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function st(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}var Bt=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Y=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Bt("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let c=0;c<i.length;++c)s+=String.fromCharCode(i[c]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return S(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Y.EMPTY_BYTE_STRING=new Y("");var bs=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function te(n){if(J(!!n,39018),typeof n=="string"){let e=0,t=bs.exec(n);if(J(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:D(n.seconds),nanos:D(n.nanos)}}function D(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Te(n){return typeof n=="string"?Y.fromBase64String(n):Y.fromUint8Array(n)}var cr=-62135596800,lr=1e6,N=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*lr);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new w(b,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new w(b,"Timestamp nanoseconds out of range: "+t);if(e<cr)throw new w(b,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new w(b,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lr}_compareTo(e){return this.seconds===e.seconds?S(this.nanoseconds,e.nanoseconds):S(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-cr;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};function Vr(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Pr(n){let e=n.mapValue.fields.__previous_value__;return Vr(e)?Pr(e):e}function Ae(n){let e=te(n.mapValue.fields.__local_write_time__.timestampValue);return new N(e.seconds,e.nanos)}var Dr="__type__",Rr="__max__",Be={fields:{__type__:{stringValue:Rr}}},Cr="__vector__",We="value";function ne(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Vr(n)?4:function(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Rr}(n)?9007199254740991:function(t){var r,i;return((i=(((r=t?.mapValue)===null||r===void 0?void 0:r.fields)||{})[Dr])===null||i===void 0?void 0:i.stringValue)===Cr}(n)?10:11:C(28295,{value:n})}function Ge(n,e){if(n===e)return!0;let t=ne(n);if(t!==ne(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ae(n).isEqual(Ae(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let c=te(i.timestampValue),m=te(s.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Te(i.bytesValue).isEqual(Te(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return D(i.geoPointValue.latitude)===D(s.geoPointValue.latitude)&&D(i.geoPointValue.longitude)===D(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return D(i.integerValue)===D(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let c=D(i.doubleValue),m=D(s.doubleValue);return c===m?He(c)===He(m):isNaN(c)&&isNaN(m)}return!1}(n,e);case 9:return ms(n.arrayValue.values||[],e.arrayValue.values||[],Ge);case 10:case 11:return function(i,s){let c=i.mapValue.fields||{},m=s.mapValue.fields||{};if(ur(c)!==ur(m))return!1;for(let p in c)if(c.hasOwnProperty(p)&&(m[p]===void 0||!Ge(c[p],m[p])))return!1;return!0}(n,e);default:return C(52216,{left:n})}}function Ie(n,e){return(n.values||[]).find(t=>Ge(t,e))!==void 0}function Ke(n,e){if(n===e)return 0;let t=ne(n),r=ne(e);if(t!==r)return S(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return S(n.booleanValue,e.booleanValue);case 2:return function(s,c){let m=D(s.integerValue||s.doubleValue),p=D(c.integerValue||c.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(n,e);case 3:return hr(n.timestampValue,e.timestampValue);case 4:return hr(Ae(n),Ae(e));case 5:return Ft(n.stringValue,e.stringValue);case 6:return function(s,c){let m=Te(s),p=Te(c);return m.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(s,c){let m=s.split("/"),p=c.split("/");for(let g=0;g<m.length&&g<p.length;g++){let y=S(m[g],p[g]);if(y!==0)return y}return S(m.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,c){let m=S(D(s.latitude),D(c.latitude));return m!==0?m:S(D(s.longitude),D(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return dr(n.arrayValue,e.arrayValue);case 10:return function(s,c){var m,p,g,y;let v=s.fields||{},_=c.fields||{},I=(m=v[We])===null||m===void 0?void 0:m.arrayValue,A=(p=_[We])===null||p===void 0?void 0:p.arrayValue,V=S(((g=I?.values)===null||g===void 0?void 0:g.length)||0,((y=A?.values)===null||y===void 0?void 0:y.length)||0);return V!==0?V:dr(I,A)}(n.mapValue,e.mapValue);case 11:return function(s,c){if(s===Be&&c===Be)return 0;if(s===Be)return 1;if(c===Be)return-1;let m=s.fields||{},p=Object.keys(m),g=c.fields||{},y=Object.keys(g);p.sort(),y.sort();for(let v=0;v<p.length&&v<y.length;++v){let _=Ft(p[v],y[v]);if(_!==0)return _;let I=Ke(m[p[v]],g[y[v]]);if(I!==0)return I}return S(p.length,y.length)}(n.mapValue,e.mapValue);default:throw C(23264,{S:t})}}function hr(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return S(n,e);let t=te(n),r=te(e),i=S(t.seconds,r.seconds);return i!==0?i:S(t.nanos,r.nanos)}function dr(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Ke(t[i],r[i]);if(s)return s}return S(t.length,r.length)}function fr(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function kr(n){return!!n&&"arrayValue"in n}function pr(n){return!!n&&"nullValue"in n}function mr(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function St(n){return!!n&&"mapValue"in n}function be(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return st(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=be(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=be(n.arrayValue.values[t]);return e}return Object.assign({},n)}var Qe=class{constructor(e,t){this.position=e,this.inclusive=t}};var Je=class{},M=class n extends Je{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new $t(e,t,r):t==="array-contains"?new Ut(e,r):t==="in"?new zt(e,r):t==="not-in"?new Ht(e,r):t==="array-contains-any"?new Wt(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new qt(e,r):new jt(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ke(t,this.value)):t!==null&&ne(this.value)===ne(t)&&this.matchesComparison(Ke(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return C(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Se=class n extends Je{constructor(e,t){super(),this.filters=e,this.op=t,this.N=null}static create(e,t){return new n(e,t)}matches(e){return function(r){return r.op==="and"}(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.N!==null||(this.N=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.N}getFilters(){return Object.assign([],this.filters)}};var $t=class extends M{constructor(e,t,r){super(e,t,r),this.key=F.fromName(r.referenceValue)}matches(e){let t=F.comparator(e.key,this.key);return this.matchesComparison(t)}},qt=class extends M{constructor(e,t){super(e,"in",t),this.keys=xr("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},jt=class extends M{constructor(e,t){super(e,"not-in",t),this.keys=xr("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function xr(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>F.fromName(r.referenceValue))}var Ut=class extends M{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return kr(t)&&Ie(t.arrayValue,this.value)}},zt=class extends M{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Ie(this.value.arrayValue,t)}},Ht=class extends M{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ie(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ie(this.value.arrayValue,t)}},Wt=class extends M{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!kr(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ie(this.value.arrayValue,r))}};var Ve=class{constructor(e,t="asc"){this.field=e,this.dir=t}};var x=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new N(0,0))}static max(){return new n(new N(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Gt=class n{constructor(e,t){this.comparator=e,this.root=t||B.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,B.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,B.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ue(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ue(this.root,e,this.comparator,!1)}getReverseIterator(){return new ue(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ue(this.root,e,this.comparator,!0)}},ue=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},B=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw C(43730,{key:this.key,value:this.value});if(this.right.isRed())throw C(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw C(27949);return e+(this.isRed()?0:1)}};B.EMPTY=null,B.RED=!0,B.BLACK=!1;B.EMPTY=new class{constructor(){this.size=0}get key(){throw C(57766)}get value(){throw C(16141)}get color(){throw C(16727)}get left(){throw C(29726)}get right(){throw C(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new B(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Kt=class n{constructor(e){this.comparator=e,this.data=new Gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ye(this.data.getIterator())}getIteratorFrom(e){return new Ye(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Ye=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var K=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!St(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=be(t)}setAll(e){let t=Q.emptyPath(),r={},i=[];e.forEach((c,m)=>{if(!t.isImmediateParentOf(m)){let p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=m.popLast()}c?r[m.lastSegment()]=be(c):i.push(m.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());St(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ge(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];St(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){st(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(be(this.value))}};var Qt=class n{constructor(e,t,r,i,s,c,m){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=c,this.documentState=m}static newInvalidDocument(e){return new n(e,0,x.min(),x.min(),x.min(),K.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,x.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,x.min(),x.min(),K.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,x.min(),x.min(),K.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(x.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=K.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=K.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=x.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Jt=class{constructor(e,t=null,r=[],i=[],s=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=c,this.endAt=m,this.O=null}};function gr(n,e=null,t=[],r=[],i=null,s=null,c=null){return new Jt(n,e,t,r,i,s,c)}var Xe=class{constructor(e,t=null,r=[],i=[],s=null,c="F",m=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=c,this.startAt=m,this.endAt=p,this.q=null,this.B=null,this.$=null,this.startAt,this.endAt}};function Es(n){return n.collectionGroup!==null}function Ts(n){let e=pn(n);if(e.q===null){e.q=[];let t=new Set;for(let s of e.explicitOrderBy)e.q.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new Kt(Q.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(m=m.add(g.field))})}),m})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.q.push(new Ve(s,r))}),t.has(Q.keyField().canonicalString())||e.q.push(new Ve(Q.keyField(),r))}return e.q}function As(n){let e=pn(n);return e.B||(e.B=Is(e,Ts(n))),e.B}function Is(n,e){if(n.limitType==="F")return gr(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Ve(i.field,s)});let t=n.endAt?new Qe(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Qe(n.startAt.position,n.startAt.inclusive):null;return gr(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Yt(n,e){let t=n.filters.concat([e]);return new Xe(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Or(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:He(e)?"-0":e}}function Ss(n,e){return function(r){return typeof r=="number"&&Number.isInteger(r)&&!He(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}(e)?function(r){return{integerValue:""+r}}(e):Or(n,e)}var Vs={asc:"ASCENDING",desc:"DESCENDING"},Ps={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ds={and:"AND",or:"OR"},Xt=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function _r(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Rs(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function yr(n){return J(!!n,49232),x.fromTimestamp(function(t){let r=te(t);return new N(r.seconds,r.nanos)}(n))}function Nr(n,e){return Zt(n,e).canonicalString()}function Zt(n,e){let t=function(i){return new O(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Cs(n,e){let t=function(i){let s=O.fromString(i);return J(Mr(s),10190,{key:s.toString()}),s}(e);if(t.get(1)!==n.databaseId.projectId)throw new w(b,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new w(b,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new F(function(i){return J(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}(t))}function ks(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=function(g,y){return Nr(g.databaseId,y)}(n,i);let s=function(g){if(g.length!==0)return Fr(Se.create(g,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let c=function(g){if(g.length!==0)return g.map(y=>function(_){return{field:ae(_.field),direction:xs(_.dir)}}(y))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);let m=function(g,y){return g.useProto3Json||ws(y)?y:{value:y}}(n,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{M:t,parent:i}}function xs(n){return Vs[n]}function Os(n){return Ps[n]}function Ns(n){return Ds[n]}function ae(n){return{fieldPath:n.canonicalString()}}function Fr(n){return n instanceof M?function(t){if(t.op==="=="){if(mr(t.value))return{unaryFilter:{field:ae(t.field),op:"IS_NAN"}};if(pr(t.value))return{unaryFilter:{field:ae(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(mr(t.value))return{unaryFilter:{field:ae(t.field),op:"IS_NOT_NAN"}};if(pr(t.value))return{unaryFilter:{field:ae(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ae(t.field),op:Os(t.op),value:t.value}}}(n):n instanceof Se?function(t){let r=t.getFilters().map(i=>Fr(i));return r.length===1?r[0]:{compositeFilter:{op:Ns(t.op),filters:r}}}(n):C(54877,{filter:n})}function Mr(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function mn(n){return new Xt(n,!0)}var en=class{},tn=class extends en{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.et=!1}rt(){if(this.et)throw new w(he,"The client has already been terminated.")}V(e,t,r,i){return this.rt(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.V(e,Zt(t,r),i,s,c)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Vt&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new w(ve,s.toString())})}D(e,t,r,i,s){return this.rt(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,m])=>this.connection.D(e,Zt(t,r),i,c,m,s)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Vt&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new w(ve,c.toString())})}terminate(){this.et=!0,this.connection.terminate()}};function Fs(n,e){return R(this,null,function*(){let t=pn(n),{M:r,parent:i}=ks(t.serializer,As(e));return(yield t.D("RunQuery",t.serializer.databaseId,i,{structuredQuery:r.structuredQuery})).filter(s=>!!s.document).map(s=>function(m,p,g){let y=Cs(m,p.name),v=yr(p.updateTime),_=p.createTime?yr(p.createTime):x.min(),I=new K({mapValue:{fields:p.fields}}),A=Qt.newFoundDocument(y,v,_,I);return g&&A.setHasCommittedMutations(),g?A.setHasCommittedMutations():A}(t.serializer,s.document,void 0))})}var Lr="ComponentProvider",Ee=new Map;function Ms(n){if(n._terminated)throw new w(he,"The client has already been terminated.");if(!Ee.has(n)){$e(Lr,"Initializing Datastore");let e=function(s){return new Lt(s)}(function(s,c,m,p){return new Ot(s,c,m,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Sr(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(n._databaseId,n.app.options.appId||"",n._persistenceKey,n._freezeSettings())),t=mn(n._databaseId),r=function(s,c,m,p){return new tn(s,c,m,p)}(n._authCredentials,n._appCheckCredentials,e,t);Ee.set(n,r)}return Ee.get(n)}var Ls=1048576,Br="firestore.googleapis.com",wr=!0;var Ze=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new w(b,"Can't provide ssl option if host option is not set");this.host=Br,this.ssl=wr}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:wr;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ls)throw new w(b,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(s,c,m,p){if(c===!0&&p===!0)throw new w(b,`${s} and ${m} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sr((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new w(b,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new w(b,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new w(b,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Pe=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ze({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new w(he,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new w(he,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ze(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Pt;switch(r.type){case"firstParty":return new kt(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new w(b,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,ut("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return R(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=Ee.get(t);r&&($e(Lr,"Removing Datastore"),Ee.delete(t),r.terminate())}(this),Promise.resolve()}};function $r(n,e){let t=typeof n=="object"?n:Jn(),r=typeof n=="string"?n:e||"(default)",i=Gn(t,"firestore/lite").getImmediate({identifier:r});if(!i._initialized){let s=Rn("firestore");s&&Bs(i,...s)}return i}function Bs(n,e,t,r={}){var i;n=Ir(n,Pe);let s=Oe(e),c=n._getSettings(),m=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;c.host!==Br&&c.host!==p&&Er("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let g=Object.assign(Object.assign({},c),{host:p,ssl:s,emulatorOptions:r});if(!se(g,m)&&(n._setSettings(g),s&&(Cn(`https://${p}`),ut("Firestore",!0)),r.mockUserToken)){let y,v;if(typeof r.mockUserToken=="string")y=r.mockUserToken,v=k.MOCK_USER;else{y=kn(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new w(b,"mockUserToken must contain 'sub' or 'user_id' field!");v=new k(_)}n._authCredentials=new Dt(new qe(y,v))}}var de=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},H=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ce(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},ce=class n extends de{constructor(e,t,r){super(e,t,function(s){return new Xe(s)}(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new H(this.firestore,null,new F(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Ro(n,e,...t){if(n=_e(n),_s("collection","path",e),n instanceof Pe){let r=O.fromString(e,...t);return sr(r),new ce(n,null,r)}{if(!(n instanceof H||n instanceof ce))throw new w(b,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(O.fromString(e,...t));return sr(r),new ce(n.firestore,null,r)}}var De=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Y.fromBase64String(e))}catch(t){throw new w(b,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Y.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var et=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new w(b,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Q(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var tt=class{constructor(e){this._methodName=e}};var Re=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new w(b,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new w(b,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return S(this._lat,e._lat)||S(this._long,e._long)}};var Ce=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var $s=/^__.*__$/;function qr(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw C(40011,{it:n})}}var nn=class n{constructor(e,t,r,i,s,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.st(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get it(){return this.settings.it}ot(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ut(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ot({path:r,_t:!1});return i.ct(e),i}lt(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ot({path:r,_t:!1});return i.st(),i}ht(e){return this.ot({path:void 0,_t:!0})}dt(e){return sn(e,this.settings.methodName,this.settings.ft||!1,this.path,this.settings.Et)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}st(){if(this.path)for(let e=0;e<this.path.length;e++)this.ct(this.path.get(e))}ct(e){if(e.length===0)throw this.dt("Document fields must not be empty");if(qr(this.it)&&$s.test(e))throw this.dt('Document fields cannot begin and end with "__"')}},rn=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||mn(e)}Tt(e,t,r,i=!1){return new nn({it:e,methodName:t,Et:r,path:Q.emptyPath(),_t:!1,ft:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function qs(n){let e=n._freezeSettings(),t=mn(n._databaseId);return new rn(n._databaseId,!!e.ignoreUndefinedProperties,t)}function js(n,e,t,r=!1){return gn(t,n.Tt(r?4:3,e))}function gn(n,e){if(jr(n=_e(n)))return zs("Unsupported field value:",e,n),Us(n,e);if(n instanceof tt)return function(r,i){if(!qr(i.it))throw i.dt(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.dt(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings._t&&e.it!==4)throw e.dt("Nested arrays are not supported");return function(r,i){let s=[],c=0;for(let m of r){let p=gn(m,i.ht(c));p==null&&(p={nullValue:"NULL_VALUE"}),s.push(p),c++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=_e(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Ss(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=N.fromDate(r);return{timestampValue:_r(i.serializer,s)}}if(r instanceof N){let s=new N(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_r(i.serializer,s)}}if(r instanceof Re)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof De)return{bytesValue:Rs(i.serializer,r._byteString)};if(r instanceof H){let s=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(s))throw i.dt(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Nr(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ce)return function(c,m){return{mapValue:{fields:{[Dr]:{stringValue:Cr},[We]:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw m.dt("VectorValues must only contain numeric values.");return Or(m.serializer,g)})}}}}}}(r,i);throw i.dt(`Unsupported field value: ${it(r)}`)}(n,e)}function Us(n,e){let t={};return function(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(i,s))return!1;return!0}(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):st(n,(r,i)=>{let s=gn(i,e.ut(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function jr(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof N||n instanceof Re||n instanceof De||n instanceof H||n instanceof tt||n instanceof Ce)}function zs(n,e,t){if(!jr(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=it(t);throw r==="an object"?e.dt(n+" a custom object"):e.dt(n+" "+r)}}var Hs=new RegExp("[~\\*/\\[\\]]");function Ws(n,e,t){if(e.search(Hs)>=0)throw sn(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new et(...e.split("."))._internalPath}catch{throw sn(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sn(n,e,t,r,i){let s=r&&!r.isEmpty(),c=i!==void 0,m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(s||c)&&(p+=" (found",s&&(p+=` in field ${r}`),c&&(p+=` in document ${i}`),p+=")"),new w(b,m+n+p)}var on=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new H(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new nt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Ur("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},nt=class extends on{data(){return super.data()}},an=class{constructor(e,t){this._docs=t,this.query=e}get docs(){return[...this._docs]}get size(){return this.docs.length}get empty(){return this.docs.length===0}forEach(e,t){this._docs.forEach(e,t)}};function Ur(n,e){return typeof e=="string"?Ws(n,e):e instanceof et?e._internalPath:e._delegate._internalPath}var ke=class{},un=class extends ke{};function Co(n,e,...t){let r=[];e instanceof ke&&r.push(e),r=r.concat(t),function(s){let c=s.filter(p=>p instanceof cn).length,m=s.filter(p=>p instanceof rt).length;if(c>1||c>0&&m>0)throw new w(b,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var rt=class n extends un{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return zr(e._query,t),new de(e.firestore,e.converter,Yt(e._query,t))}_parse(e){let t=qs(e.firestore);return function(s,c,m,p,g,y,v){let _;if(g.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new w(b,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){br(v,y);let A=[];for(let V of v)A.push(vr(p,s,V));_={arrayValue:{values:A}}}else _=vr(p,s,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||br(v,y),_=js(m,c,v,y==="in"||y==="not-in");return M.create(g,y,_)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function ko(n,e,t){let r=e,i=Ur("where",n);return rt._create(i,r,t)}var cn=class n extends ke{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Se.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let c=i,m=s.getFlattenedFilters();for(let p of m)zr(c,p),c=Yt(c,p)}(e._query,t),new de(e.firestore,e.converter,Yt(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function vr(n,e,t){if(typeof(t=_e(t))=="string"){if(t==="")throw new w(b,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Es(e)&&t.indexOf("/")!==-1)throw new w(b,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(O.fromString(t));if(!F.isDocumentKey(r))throw new w(b,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fr(n,new F(r))}if(t instanceof H)return fr(n,t._key);throw new w(b,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${it(t)}.`)}function br(n,e){if(!Array.isArray(n)||n.length===0)throw new w(b,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zr(n,e){let t=function(i,s){for(let c of i)for(let m of c.getFlattenedFilters())if(s.indexOf(m.op)>=0)return m.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new w(b,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new w(b,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var ln=class{convertValue(e,t="none"){switch(ne(e)){case 0:return null;case 1:return e.booleanValue;case 2:return D(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Te(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw C(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return st(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[We].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(c=>D(c.doubleValue));return new Ce(s)}convertGeoPoint(e){return new Re(D(e.latitude),D(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Pr(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ae(e));default:return null}}convertTimestamp(e){let t=te(e);return new N(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=O.fromString(e);J(Mr(r),9688,{name:e});let i=new Ue(r.get(1),r.get(3)),s=new F(r.popFirst(5));return i.isEqual(t)||dn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};var hn=class extends ln{constructor(e){super(),this.firestore=e}convertBytes(e){return new De(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new H(this.firestore,null,t)}};function xo(n){(function(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new w(Ar,"limitToLast() queries require specifying at least one orderBy() clause")})((n=Ir(n,de))._query);let e=Ms(n.firestore),t=new hn(n.firestore);return Fs(e,n._query).then(r=>{let i=r.map(s=>new nt(n.firestore,t,s.key,s,n.converter));return n._query.limitType==="L"&&i.reverse(),new an(n,i)})}(function(){(function(t){fe=t})(`${Qn}_lite`),ye(new U("firestore/lite",(e,{instanceIdentifier:t,options:r})=>{let i=e.getProvider("app").getImmediate(),s=new Pe(new Rt(e.getProvider("auth-internal")),new xt(i,e.getProvider("app-check-internal")),function(m,p){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new w(b,'"projectId" not provided in firebase.initializeApp.');return new Ue(m.options.projectId,p)}(i,t),i);return r&&s._setSettings(r),s},"PUBLIC").setMultipleInstances(!0)),G("firestore-lite",tr,""),G("firestore-lite",tr,"esm2017")})();var Gs="firebase",Ks="11.7.3";G(Gs,Ks,"app");var Ho=(()=>{let e=class e{constructor(){this.app=Tt(En.firebaseConfig),this.db=$r(this.app)}getDateAndTime(){var r=new Date,i=r.getDate()+"/"+(r.getMonth()+1)+"/"+r.getFullYear()+" "+r.getHours()+":"+r.getMinutes()+":"+r.getSeconds();return i}getCurrentDate(){var r=new Date,i=r.getDate()+"/"+(r.getMonth()+1)+"/"+r.getFullYear();return i}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=bn({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();export{Ro as a,Co as b,ko as c,xo as d,En as e,Ho as f};
